CFLAGS += -g
#-----------------------------------------------------------------------------
CFLAGS += -save-temps
#-----------------------------------------------------------------------------
CFLAGS += -finstrument-functions
#-----------------------------------------------------------------------------
LDFLAGS += -Xlinker -Map -Xlinker a.out.map
#-----------------------------------------------------------------------------
cyg.o: override CFLAGS = -g -save-temps
#-----------------------------------------------------------------------------
a.out: a.o b.o c.o m.o d.o cyg.o
	${CC} ${CFLAGS} ${LDFLAGS} -o $@ a.o b.o c.o m.o d.o cyg.o
	nm -n -l a.out | \
	    grep -v '\(compiled\)\|\(\.o$$\)\|\( [aUw] \)\|\(\.\.ng$$\)\|\(LASH[RL]DI\)' | \
	    sort >a.out.nm

#-----------------------------------------------------------------------------
clean:
	rm -f a.out *.o *.i *.s a.out.nm a.out.map
#-----------------------------------------------------------------------------
