#!/bin/bash -x
# -----------------------------------------------------------------------------
ctrlc_count=0
# -----------------------------------------------------------------------------
function no_ctrlc()
{
    let ctrlc_count++
    echo ''
    if [[ $ctrlc_count == 1 ]]; then
        echo "Stop that."
    elif [[ $ctrlc_count == 2 ]]; then
        echo "Once more and I quit."
    else
        echo "That's it, I quit."
        exit
    fi
}
# -----------------------------------------------------------------------------
function got_exit()
{
    echo
    echo "Got to end of script, exit"
    exit
}
# -----------------------------------------------------------------------------
trap no_ctrlc SIGINT || true
# -----------------------------------------------------------------------------
trap got_exit EXIT
# -----------------------------------------------------------------------------
while true
do
    echo Sleeping
    sleep 10
    echo "after sleep 10"
done
# -----------------------------------------------------------------------------
echo "after while forever"
exit 0
# -----------------------------------------------------------------------------
