#!/bin/bash -ex
# vim: tabstop=8 expandtab shiftwidth=4 softtabstop=4
#-----------------------------------------------------------------------------
rpm --rebuilddb
tar xf /home/m4/enterprise/builderenv/containers/builder/etc-centos8.tgz -C /
#-----------------------------------------------------------------------------
#-- cd /home/m4/enterprise/isoimage/RPMS

dnf -y --releasever=8.1.1911 install \
    --nobest \
    passwd systemd dbus openssh-server openssl bc hostname vim-minimal \
    xmlto pesign pciutils-devel newt-devel rpm-build \
    redhat-rpm-config hmaccalc perl perl-ExtUtils-Embed zlib-devel \
    audit-libs-devel binutils-devel elfutils-devel net-tools iproute \
    numactl-devel wget nfs-utils sqlite sqlite-devel ncurses-devel java-devel \
    systemd-devel device-mapper-devel libbsd-devel openssl-devel \
    php php-cli php-common createrepo genisoimage python3-dnf \
    iputils elfutils-libelf-devel python36-devel python3-pip \
    python2 rsync @development \
    compat-openssl10 \
    \
    mlocate \
    man-pages \
    libgcrypt-devel \
    sysstat \
    ftp \
    libstdc++-docs \
    numactl \
    lsof \
    libacl-devel \
    libdb-devel \
    texinfo

dnf -y --releasever=8.1.1911 --nobest install  targetcli
#-----------------------------------------------------------------------------
# Update database for mlocate package (locate)
/usr/bin/updatedb
#-----------------------------------------------------------------------------
echo "Done with $0"
#-----------------------------------------------------------------------------
exit 0
#-----------------------------------------------------------------------------
#-----------------------------------------------------------------------------
