#!/bin/bash -e
# Set bits set for attribute user.cifs.dosattrib (32 bits).
# mount.cifs.directory ${M}
#-----------------------------------------------------------------------------
FILEPREFIX='A'
#-----------------------------------------------------------------------------
M="m4-v1"
C="/mnt/cifs/${M}"
#-----------------------------------------------------------------------------
make_file()
{
    h=`printf "0x%08x" ${1}`			|| true
    f="${C}/${FILEPREFIX}.$h"
    rm -f ${f}
    echo "File $f created." > ${f}
    echo "File $f created."
    #-----------------------------------------------------------------------------
    setfattr -n user.cifs.dosattrib -v ${h} -- ${f}	|| true
}
##############################################################################
d=1						|| true
e=1						|| true
while [ "$d" -le 32 ]; do
    make_file $e
    let d=$d+1					|| true
    let e=$e*2					|| true
done
# . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
make_file 4026531839	# Not quite all bits are allowed, not 0x0100000000 ...
##############################################################################
echo "Done with $0"
exit 0
#-----------------------------------------------------------------------------
