#!/bin/bash -up
#-----------------------------------------------------------------------------
I=(W1)
#++ S=(v h csv fs abc)
#++ A=(--vert --hori --csv --fs --abc)
#++ S=(fs)
#++ A=(--fs)
S=(csv)
A=(--csv)
P=XXX
#-----------------------------------------------------------------------------
clear
len=${#S[@]}
#-----------------------------------------------------------------------------
for i in ${I[@]}; do
    for (( j=0; j<$len; j++ )); do
    	s=${S[j]}
    	a=${A[j]}
	rm -f ${P}.ims.${s}.${i}
	rm -f ${P}.mus.${s}.${i}
	rm -f ${P}.diff.comp.${s}.${i}
	rm -f ${P}.diff.out.${s}.${i}
	./imscomp ${a} ${i}.gcs ${i}.${s} > ${P}.ims.${s}.${i} 2>&1
	~/musicomp2abc/musicomp2abc ${a} ${i}.gcs ${i}-m.${s} > ${P}.mus.${s}.${i} 2>&1
	diff -u ${P}.mus.${s}.${i} ${P}.ims.${s}.${i} > ${P}.diff.comp.${s}.${i}
	echo "--- ${i} --- ${a} --- ${s} ---------------------------------------------------"
	cat ${P}.diff.comp.${s}.${i}
	diff -u ${i}-m.${s} ${i}.${s} > ${P}.diff.out.${s}.${i}
	echo "------------------------------------------------------------------------------"
	cat ${P}.diff.out.${s}.${i}
    done
done
#-----------------------------------------------------------------------------
exit 0
#-----------------------------------------------------------------------------
