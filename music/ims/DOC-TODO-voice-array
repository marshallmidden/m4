        ky = key_voice[voiceon][measure_on]
#-----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
# Set all voices in all staves in voiceon array (or if int, only one voice).
def set_all_staff_arr(voiceon, value, arr, original_line):
#-----------------------------------------------------------------------------
# Get value from one of the voices (check all staves have the same).
def get_staff_arr(voiceon, arr, original_line):
#-----------------------------------------------------------------------------
# True or False check if all voiceon is in array.
def check_voice_staff_in(voiceon, arr):
#-----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
xxx def get_trill_note()
xxx	getnote()
xxx	get_time()
xxx	get_time_stak()
#-----------------------------------------------------------------------------
xxx def get_sequence_note()
xxx	get_vol_note()
xxx	getnote()
xxx	get_time()
#-----------------------------------------------------------------------------
    def do_a_note()
    	bufs[onvoice] ... [measure_on]		-- figure this out.
xxx	find_vol_cresc()
xxx	getnote()
xxx	get_time()
#-----------------------------------------------------------------------------
xxx def getnote()	--	NOTHING - bufs_
#-----------------------------------------------------------------------------
xxx def get_time()	--	NOTHING - bufs_
#-----------------------------------------------------------------------------
xxx def find_vol_cresc()
#-----------------------------------------------------------------------------
    def handle_note()
	set_tie_on_previous_note()
?	bufs_tie_next[voiceon] = tie_this
?	bufs_legato_next[voiceon] = append_legato
?	put_on_bufs()
?	instak()
#-----------------------------------------------------------------------------
xxx def process_notes_oldway()
xxx	handle_note()
#-----------------------------------------------------------------------------
xxx def process_notes_for_staff()
#-----------------------------------------------------------------------------
    def handle_staff_note()
	set_tie_on_previous_note()
?	bufs_tie_next[voiceon] = tie_this		- Fix this
?	bufs_legato_next[voiceon] = append_legato	- Fix this
?	put_on_bufs()
?	instak()
#-----------------------------------------------------------------------------
xxx def process_staff_notes()
#-----------------------------------------------------------------------------







#-----------------------------------------------------------------------------
#-----------------------------------------------------------------------------
#-----------------------------------------------------------------------------
#-----------------------------------------------------------------------------
# These are interesting. If last_voice_staff being used with getting notes ... all oct/time set.
# When selecting them, what to do with ones that differ ... . Warn, and take first?
#   oct[voice]
#   time[voice]
#   inst[voice]
#
#   acc_m[voice]
#   acc_m_xpose[voice]
#   xpose_new_key[voice]
#   xpose[voice]
#
#   cresc_time[voice]
#   cresc_volume[voice]
#   cresc_direction[voice]
#-----------------------------------------------------------------------------
# This is for length of notes in voice after a measure. What to do for staves?
#   tlth = { voice : 0 }                    # 60ths of a second in a voice -- nothing in measure working on.
#-----------------------------------------------------------------------------
#   vl[voice][m]
#   running_vl[voice][m]
#   mlth[voice][m]
#-----------------------------------------------------------------------------
#   bufs[voice][m]
#   bufs_intensity[voice][m]
#   bufs_legato_next[voice][m]
#   bufs_length[voice][m]
#   bufs_suffixes[voice][m]
#   bufs_tie_next[voice][m]
#   bufs_velocity[voice][m]
#   bufs_vol[voice][m]
#-----------------------------------------------------------------------------
# CONTINUE BELOW - 2023-05-04_14-52-00
# SWITCH ORDER OF ARRAY INDEXES.
#   clef[m][voice]
#   vinstrument[m][voice]
#   reverb[m][voice]
#   pan[m][voice]
#   intensity[m][voice]
# CONTINUE ABOVE - 2023-05-04_14-52-00
#
