#!/bin/bash -ex
#-----------------------------------------------------------------------------
# This script gives new gmp, mpfr, mpc, and binutils -- so that new gcc can be compiled.
#-----------------------------------------------------------------------------
echo entering 02.NEW-prereq-4-gcc
BINARIES="/home/m4/new-a"
mkdir -p ${BINARIES}
J="-j 200"
#-----------------------------------------------------------------------------
prepath () {
    case ":$PATH:" in
      *":$1:"*) :;;         # in the middle
      "$1:"*) :;;           # at the end
      *":$1") :;;           # at the beginning
      "$1") :;;             # if only one
      *) PATH=$1:$PATH;;
    esac
}
prepath ${BINARIES}
#-----------------------------------------------------------------------------
( cd gmp-6.2.0 && ./configure --prefix=${BINARIES} && make ${J} && make install )
( cd gmp-6.2.0 && make distclean )
#-----------------------------------------------------------------------------
( cd mpfr-4.1.0 && ./configure --prefix=${BINARIES} --with-gmp=${BINARIES} && make ${J} && make install )
( cd mpfr-4.1.0 && make distclean )
#-----------------------------------------------------------------------------
( cd mpc-1.2.1 && ./configure --prefix=${BINARIES} --with-gmp=${BINARIES} --with-mpfr=${BINARIES} && make ${J} && make install )
( cd mpc-1.2.1 && make distclean )
#-----------------------------------------------------------------------------
( cd binutils-2.35.1 && ./configure --prefix=${BINARIES} --with-gmp=${BINARIES} --with-mpfr=${BINARIES} --with-mpc=${BINARIES} && make ${J} && make install )
( cd binutils-2.35.1 && make distclean )
#-----------------------------------------------------------------------------
echo exiting 02.NEW-prereq-4-gcc
exit 0
#-----------------------------------------------------------------------------
