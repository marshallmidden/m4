#!/bin/bash -e
#-----------------------------------------------------------------------------
W=`pwd`
DIRnew=linux
#-----------------------------------------------------------------------------
# Makefile variables and bash variables.
#-----------------------------------------------------------------------------
dry-run()
{
    patch -d ${DIRnew} -p1 -i ${W}/$1 --dry-run
}
#-----------------------------------------------------------------------------
patchit()
{
    patch -d ${DIRnew} -p1 -i ${W}/$1
}
#-----------------------------------------------------------------------------
# The inverse, for getting the line numbers on the other side correct.
#-----------------------------------------------------------------------------
undry-run()
{
    patch -R -d ${DIRnew} -p1 -i ${W}/$1 --dry-run
}
#-----------------------------------------------------------------------------
unpatchit()
{
    patch -R -d ${DIRnew} -p1 -i ${W}/$1
}
#-----------------------------------------------------------------------------
if [ "$1" == '' ]; then
    # Get the patch to work on.
    PATCH=`grep -v '^#' 99.patch-work-on`
else
    PATCH="$1"
fi
#=============================================================================
patchit ${PATCH}
#=============================================================================
# End of file 02.PATCH
